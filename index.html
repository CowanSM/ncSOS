<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>NcSOS by asascience-open</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>NcSOS</h1>
        <p>SOS Service on top of THREDDS</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/asascience-open/ncSOS" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/asascience-open/ncSOS/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/asascience-open/ncSOS/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>NcSOS</h1>

<p>NcSOS adds a OGC SOS service to your existing THREDDS server.</p>

<p><em>You will need a working THREDDS installation of a least <strong>4.3</strong> to run NcSOS</em>.</p>

<h1>Installation</h1>

<ol>
<li>Download ncSOS.zip</li>
<li>Extract ncSOS.zip into a local directory</li>
<li>Copy the ncSOS.jar into your $TOMCAT_HOME/webapps/thredds/WEB-INF/lib directory.</li>
<li>Copy the sos-servlet.xml configuration file into the $TOMCAT_HOME/webapps/thredds/WEB-INF directory.</li>
<li>
<p>Add two new servlet mappings to your $TOMCAT_HOME/webapps/thredds/WEB-INF/web.xml file:</p>

<div class="highlight">
<pre><span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>sos<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
<span class="nt">&lt;/servlet&gt;</span>
</pre>
</div>


<div class="highlight">
<pre><span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>sos<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/sos/*<span class="nt">&lt;/url-pattern&gt;</span>
<span class="nt">&lt;/servlet-mapping&gt;</span>
</pre>
</div>
</li>
<li>
<p>Add the following service definition to enable SOS in your THREDDS catalog XML files:</p>

<div class="highlight">
<pre><span class="nt">&lt;service</span> <span class="na">name=</span><span class="s">"sos"</span> <span class="na">serviceType=</span><span class="s">"SOS"</span> <span class="na">base=</span><span class="s">"/thredds/sos/"</span> <span class="nt">/&gt;</span>
</pre>
</div>
</li>
<li><p>Restart the web application server.</p></li>
</ol><h1>Supported Datasets</h1>

<p>NcSOS works with datasets that can be loaded as an ANY_POINT FeatureType using the <a href="http://www.unidata.ucar.edu/software/netcdf-java/documentation.htm">NetCDF-Java library</a>.  A mapping from <a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#discrete-sampling-geometries">CF-1.6 Discrete Sampling Geometries</a> to <a href="http://www.unidata.ucar.edu/software/netcdf-java/reference/FeatureDatasets/PointFeatures.html">NetCDF-Java Point Feature Types</a> to NcSOS offerings is below.</p>

<p><strong>Note:</strong> NetCDF-Java added support for the CF-1.6 Discrete Sampling Geometries in version <strong>4.3</strong>.  Any version prior to <strong>4.3</strong> will not work with NcSOS.</p>

<table>
<tr>
<th>CF-1.6</th>
        <th>NetCDF-Java</th>
        <th>What NcSOS Offers</th>
    </tr>
<tr>
<td>Point</td>
        <td>PointFeature</td>
        <td>Point</td>
    </tr>
<tr>
<td>Point</td>
        <td>PointFeatureCollection</td>
        <td>Many Points</td>
    </tr>
<tr>
<td>Profile</td>
        <td>ProfileFeature</td>
        <td>Profile</td>
    </tr>
<tr>
<td>Profile</td>
        <td>ProfileFeatureCollection</td>
        <td>Many Profiles</td>
    </tr>
<tr>
<td>Timeseries</td>
        <td>StationTimeSeriesFeature</td>
        <td>Timeseries</td>
    </tr>
<tr>
<td>Timeseries</td>
        <td>StationTimeSeriesFeatureCollection</td>
        <td>Many Timeseries</td>
    </tr>
<tr>
<td>TimeseriesProfile</td>
        <td>StationProfileFeature</td>
        <td>TimeseriesProfile</td>
    </tr>
<tr>
<td>TimeseriesProfile</td>
        <td>StationProfileFeatureCollection</td>
        <td>Many TimeseriesProfiles</td>
    </tr>
<tr>
<td>Trajectory</td>
        <td>TrajectoryFeature</td>
        <td>Trajectory</td>
    </tr>
<tr>
<td>Trajectory</td>
        <td>TrajectoryFeatureCollection</td>
        <td>Many Trajectories</td>
    </tr>
<tr>
<td>TrajectoryProfile</td>
        <td>SectionFeature</td>
        <td>Trajectory with a profile of data (ranging Z) at each point</td>
    </tr>
<tr>
<td>TrajectoryProfile</td>
        <td>SectionFeatureCollection</td>
        <td>Many Trajectories with a profile of data (ranging Z) at each point</td>
    </tr>
</table><h2>Compatible Templates</h2>

<p>Working NetCDF templates for all types of the CF-1.6 Discrete Sampling Geometries are available for reference when creating files for NcSOS to serve.  Each of these templates aligns with a corresponding CF-1.6 example.  Each template folder has a description of the type of data used in each file and when to use such an encoding.</p>

<h3><a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8294224">CF-1.6 Point</a></h3>

<p>One or more parameters measured at a point in time and space.</p>

<p><strong>Example:</strong>  You went out on a boat one day and measured a few parameters.  Some unrelated time in the future, you went out to a completely different point and measured a few parameters.  The measurements have nothing in common.  This could be represented as a CF-1.6 Point dataset containing two points.</p>

<p><strong>Templates:</strong> <a href="https://github.com/asascience-open/CFPointConventions/tree/master/point">https://github.com/asascience-open/CFPointConventions/tree/master/point</a></p>

<h3><a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#time-series-data">CF-1.6 TimeSeries</a></h3>

<p>One or more parameters measured at a point space with varying time.</p>

<p><strong>Example:</strong>  Two wind sensors measuring wind speed and wing gust every 6 minutes for a year.  The sensors did not move from their geographic location during the year.  This could be represented as a CF-1.6 Timeseries dataset containing two 'stations'.</p>

<p><strong>Templates:</strong> <a href="https://github.com/asascience-open/CFPointConventions/tree/master/timeSeries">https://github.com/asascience-open/CFPointConventions/tree/master/timeSeries</a></p>

<h3><a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8405568">CF-1.6 TimeSeriesProfile</a></h3>

<p>A set of data points along a vertical line.</p>

<p><strong>Example:</strong> The timeseries produced from bottom mounted ADCP.</p>

<p><strong>Templates:</strong> <a href="https://github.com/asascience-open/CFPointConventions/tree/master/timeSeriesProfile">https://github.com/asascience-open/CFPointConventions/tree/master/timeSeriesProfile</a></p>

<h3><a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8377728">CF-1.6 Trajectory</a></h3>

<p>A set of data points along a 1D curve in time and space.</p>

<p><strong>Example:</strong> A glider moving through the water column in the x,y, and z dimentions, and taking readings at its location.</p>

<p><strong>Templates:</strong> <a href="https://github.com/asascience-open/CFPointConventions/tree/master/trajectory">https://github.com/asascience-open/CFPointConventions/tree/master/trajectory</a></p>

<h3><a href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.6/cf-conventions.html#idp8438928">CF-1.6 TrajectoryProfile</a></h3>

<p>Profiles taken along a trajectory.</p>

<p><strong>Example:</strong> A glider moving through the water column in the x,y, and z dimentions, making water column profiles as it moves.</p>

<p><strong>Templates:</strong> <a href="https://github.com/asascience-open/CFPointConventions/tree/master/trajectoryProfile">https://github.com/asascience-open/CFPointConventions/tree/master/trajectoryProfile</a></p>

<h2>Will my dataset work?</h2>

<p>If you already have your dataset in a THREDDS server, you can test if it will work with NcSOS by using the ToolsUI program from the NetCDF-Java library.  You can Webstart the ToolsUI application here: <a href="http://www.unidata.ucar.edu/software/netcdf-java/v4.3/webstart/netCDFtools.jnlp">ToolsUI JNLP Webstart</a>.</p>

<p>Enter your OPeNDAP Data endpoint from THREDDS 
<img src="http://i.imgur.com/O3YkY.png" alt="OPeNDAP Link"></p>

<p>Into the ToolsUI FeatureTypes / PointFeature tab and press enter:
<img src="http://i.imgur.com/EYHQg.png" alt="Enter DAP URL into ToolsUI"></p>

<p>If you see a row of data here, you are in good shape so far!</p>

<p><img src="http://i.imgur.com/045z8.png" alt="Working file!"></p>

<p><img src="http://i.imgur.com/jTCYE.png" alt="Clicking through rows!"></p>

<h1>Supported Output Formats</h1>

<ul>
<li>OOSTethys SWE ("text/xml; subtype='om/1.0.0'")</li>
<li>IOOS SWE (WIP) (?)</li>
</ul><h1>Function Diagram</h1>

<ul>
<li><a href="https://github.com/asascience-open/ncSOS/wiki/Function-Diagram">Function Diagram</a></li>
</ul>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/asascience-open">asascience-open</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-33321232-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>